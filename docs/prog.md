== Директивы языка Бейсик ==

NEW
RUN
LIST
CONT
MSAVE
MLOAD

Директива '''NEW''' подготавливает интерпретатор
для ввода новой программы с клавиатуры дисплея. Текст программы, набранный ранее,
стирается.

Директива '''RUN(N)''' служит для запуска программы
со строки с номером N. Если номер строки отсутствует, то работа программы начинается
со строки с наименьшим номером. Всем переменным присваивается значение 0 или
«пустая строка»,

Директива '''LIST(N)''' инициирует распечатку
текста программы, находящейся в ОЗУ, начиная со строки с номером N. Если номер
отсутствует, то распечатка начинается с начала программы.

Директива '''CONT''' позволяет продолжить выполнение
программы с того места, где она была прервана нажатием на клавиши «УС» и «С»,
или при выполнении оператора '''STOP'''. Эта директива— одно из основных средств
отладки программ на Бейсике. В случае невозможности дальнейшего выполнения программы
на экран дисплея выдается соответствующее сообщение об ошибке.

Директива '''MSAVE(имя)''' позволяет переписать
программу на Бейсике из ОЗУ на магнитную ленту. Имя программы должно состоять
из одного символа латинского алфавита, Впрочем, его можно и не указывать. В
этом случае и при последующем вводе программы ее имя также указывать не следует.

Директива '''MLOAD(имя)''' предназначена для
загрузки программ на Бейсике с магнитной ленты в ОЗУ. Если имя программы указано,
то происходит поиск данной программы, если нет— в ОЗУ загружается первая встретившаяся
программа на Бейсике, записанная без указания имени.

== Операторы языка Бейсик ==

REM
DIM
DATA
READ
RESTORE
INPUT
PRINT
CUR
GOTO
GOSUB
RETURN
ON
FOR
NEXT
IF
CLS
PLOT
LINE

В Бейсике имеется ряд операторов, которые можно
разделить на две группы:

* Выполняемые,
* невыполняемые (операторы описания).

Рассмотрим сначала последние.

Оператор '''REM''' служит для вставки в текст
программы комментариев. Он не влияет на выполнение программы, так как все, что
стоит в строке за этим оператором, интерпретатором игнорируется.

Оператор '''DIM''' предназначен для описания
массивов, используемых в программе. Массив можно не описывать, если его размерность
не превышает 10. Одним оператором '''DIM''' можно описать сразу несколько массивов.

<pre>
ПРИМЕР 3
=============
10 DIM A (30), B (15,15), C2 (3,3,3) 
20 DIM P$(5), R$(7,4)
</pre>

Массив должен быть описан в программе до его использования,
иначе вступает в силу описание по умолчанию.

Оператором '''DATA''' можно описывать данные
непосредственно в программе. Значения данных присваиваются переменным программы
при помощи оператора '''READ'''. Программа может содержать любое число операторов
'''DATA''', и располагаться они могут в любом ее месте, независимо от положения
операторов '''READ'''. Оператором '''DATA''' могут быть описаны любые данные,
как числовые, так и символьные:

<pre>
ПРИМЕР 4
10 DATA 12,865, "КП103М", "КР580ВК28" <br>
20 DАТА 'ТРАНЗИСТОР', 'МИКРОСХЕМА'
</pre>

Все данные, описанные при помощи оператора '''DATA''',
образуют так называемый блок данных. Данные из блока можно считать, воспользовавшись
оператором '''READ'''. Они будут выведены последовательно, начиная с первого.
После каждого обращения к блоку происходит перемещение на одну позицию так называемого внутреннего (для интерпретатора) указателя данных.

Существует еще один оператор описания, но с ним
мы познакомимся далее, в разделе, посвященном встроенным функциям Бейсика.

Выполняемые операторы, в свою очередь, также могут
быть разделены на ряд групп:

* ввода-вывода,
* управления ходом выполнения программы,
* организации циклов,
* графические и
* связи с машинными ресурсами.

Особое место занимает условный оператор.

Оператор '''READ''' предназначен для чтения данных из блока и присвоения конкретных
значений переменным программы. Запись этого оператора в программе выглядит так:


<pre>
READ XI, Х2, ..., XN
</pre>
где XN— имена числовых или текстовых переменных.

При описании данных программист обязан строго следить за соответствием
типов данных и переменных. При каждом выполнении оператора '''READ''' указатель
данных смещается на одну позицию.

Оператор '''RESTORE'''. Служит для перемещения
указателя в первую позицию, обеспечивая тем самым возможность повторного считывания
данных из блока.

Оператор '''INPUT''' позволяет вводить данные
с клавиатуры дисплея непосредственно при выполнении программы на Бейсике. Значения
введенных данных присваиваются переменным, имена которых указывают вслед за
оператором '''INPUT'''. Это могут быть как числовые, так и символьные переменные.
Использование оператора иллюстрирует следующий пример:

<pre>
ПРИМЕР 5
==================
10 INPUT A1 
20 INPUT A2, A3, A4 
30 INPUT B$, E2
</pre>

При выполнении оператора '''INPUT''' на экране
дисплея возникает символ «'''?'''». В ответ на этот вопрос с клавиатуры вводят
данные, которые «распечатываются» на экране в строку сразу после этого символа.

Если оператором '''INPUT''' необходимо ввести
несколько переменных, то после ввода очередного значения необходимо нажать на
клавишу «''','''». Ввод данных заканчивается нажатием на клавишу «ВК». Если
после появления знака «'''?'''» сразу нажать на клавишу «ВК», то интерпретатор
переходит из программного режима в непосредственный.

После оператора '''INPUT''' может стоять строка
символов, заключенная в кавычки. В этом случае при выполнении оператора на экран
дисплея будет выведено сначала это сообщение, а затем знак «'''?'''»:

<pre>
ПРИМЕР 6 
====================== 
40 INPUT "ВАШЕ ИМЯ"; I$
</pre>

При вводе данных, пока не нажата клавиша конца
ввода «ВК», для внесения исправлений можно пользоваться клавишей «».

Оператор '''PRINT''' предназначен для вывода
на экран дисплея значений переменных, сообщений и результатов вычислений. Если
оператор использован без операнда, то это приводит к печатанию одной пустой
строки. При вводе программы и в непосредственном режиме вместо слова '''PRINT'''
можно набрать символ «'''?'''». В этом случае при последующем просмотре текста
программы по директиве '''LIST''', вы увидите, что в тексте знак «'''?'''»
автоматически заменен на слово '''PRINT'''.

Операндов, стоящих вслед за оператором '''PRINT''',
может быть несколько, и тогда их отделяют друг от друга разделителями ", « или
„;“, причем при использовании первого под каждое выводимое значение отводится
14 позиций, а строке, второго— столько, сколько необходимо.

Числа при печати могут быть представлены в виде
целого числа, числа с десятичной точкой и в экспоненциальном виде. В любой форме
печатается не более 6 цифр.

Если после последнего операнда в операторе '''PRINT'''
стоит разделитель, то при выполнении следующего оператора '''PRINT''' печать
будет продолжена в той же строке. Если же разделителя нет, то печать начнется
с новой строки. Для печати данных в определенном месте экрана при помощи оператора
'''PRINT''' в языке Бейсик предусмотрены специальные функции, рассматриваемые
ниже. Следующий пример иллюстрирует использование оператора '''PRINT''':

<pre>
ПРИМЕР 7 
====================
10 PRINT "ПРОГРАММА РАСЧЕТА УСИЛИТЕЛЯ" 
20 PRINT "КОЛИЧЕСТВО="; A6 
30 PRINT A, B, S4 
40 PRINT 45*A2*S3 
50 PRINT A$, A2$, N7 
</pre>

Оператор '''CUR X, Y''' служит для перемещения
курсора в позицию с координатой '''Х''' по горизонтали и координатой '''Y'''
по вертикали. Начало отсчета— левый нижний угол экрана. Диапазон изменения
координат курсора по горизонтали— 0-63, по вертикали— 0-31. Если после оператора
'''CUR''' сразу выполняется оператор печати '''PRINT''', то вывод информации
на экран начнется с позиции с координатами '''Х''' и '''Y''':

<pre>
ПРИМЕР 8
==================
10 CUR 25,15 
20 PRINT "ГPAФИK #5"
</pre>

После выполнения этой программы в центре экрана
появится текст „ГРАФИК 5“. Оператор '''CUR''' позволяет создавать программы,
реализующие так называемый экранный режим работы и полностью использующие возможности
нашего дисплея. К ним можно отнести разнообразные игровые программы, экранные
редакторы текстов, программы обработки информации, представленной в табличной
форме, и многие другие.

Программа на Бейсике выполняется строка за строкой,
в соответствии с их номерами. Однако имеется ряд операторов, изменяющих естественный
ход выполнения программы.

Оператор '''GOTO N'''— это оператор безусловной
передачи управления на строку с номером N.

Операторы '''GOSUB N''' и '''RETURN''' служат
для организации подпрограмм. Что такое подпрограммы и необходимость их применения
мы уже обсуждали ранее применительно к языку ассемблера. Оператор '''GOSUB N'''
передает управление на строку с номером N. Заканчиваться подпрограмма должна
обязательно оператором '''RETURN'''. После его выполнения происходит возврат
в то место основной программы, откуда произошел вызов подпрограммы. Допускается
многократная вложенность подпрограмм, степень вложенности ограничена только
объемом свободной памяти.

Операторы '''ON Х GOTO N1, N2, … …NM''' и
'''ON Х GOSUB N1, N2 … NM''' в зависимости от результата вычисления выражения
'''Х''' реализуют условную передачу управления на одну из строк программы,
номер которой указан в списке, следующем за оператором. При выполнении оператора
сначала вычисляется значение выражения '''X''', от результата берется целая
часть, которая и указывает в списке на номер строки. Если результат выражения
равен 1, то управление будет передано на строку N1, двум— на строку N2 и т.
д. Если же результат выражения меньше единицы или больше, чем количество номеров
строк в списке, то выполняется оператор, непосредственно следующий за оператором
'''ON-GOTO''' или '''ON-GOSUB'''. Рассмотренные операторы в литературе часто
называют „переключателями“. Действительно, их работа похожа на работу многопозиционного
переключателя, коммутирующего прохождение сигнала по одному из возможных направлений.
„Переключатель“ позволяет сократить текст программы в тех случаях, когда необходим
анализ множества вариантов, программисту же необходимо так „подобрать“ выражение
X, чтобы при всех возможных значениях входящих в него переменных происходило
„переключение“ на строку с нужным номером.

Оператор '''STOP''' предназначен для прекращения
выполнения программы и перевода интерпретатора в непосредственный режим. Этот
оператор очень удобен при отладке программ, так как позволяет создать в них
контрольный останов. Выполнение прерванной программы можно продолжить, выдав
интерпретатору директиву '''CONT'''. После выполнения оператора '''STOP'''
на экран дисплея выводится сообщение:

<pre>
"СТОП в XX"
</pre>
где XX— номер строки, в которой произошел останов.

Программы, написанные на любом языке программирования,
обычно содержат многократно повторяющиеся фрагменты— циклы. Для организации
циклов в языке Бейсик имеются специальные операторы.

Оператор '''FOR Х ТО Y STEP Z'''— это оператор
инициализации цикла, а оператор '''NEXT Х'''— оператор конца цикла. Все, что
находится между ними, называют телом цикла. В операторе инициализации цикла
Х— выражение, задающее имя переменной цикла и присваивающее ей начальное значение;
Y— выражение, определяющее конечное значение переменной цикла, Z— значение,
на которое должна измениться переменная цикла (шаг цикла) после каждого выполнения
оператора '''NEXT'''. Если шаг цикла равен +1, то выражение '''STEP Z''' можно
опустить. Проиллюстрируем сказанное на примере:

<pre>
ПРИМЕР 9
====================
10 FOR 1=0 ТО 10 STEP 2 
20 PRINT I; 
30 NEXT I
</pre>

После выполнения этой программы на экране дисплея
появится 6 значений: 0246810. В данном примере оператор, стоящий в строке 20,
является телом цикла. Таким образом, сущность работы оператора цикла заключается
в следующем:

* задается начальное значение переменной цикла;
* выполняются операторы, входящие в тело цикла;
* проводится проверка достижения переменной цикла конечного значения;
* изменяется значение переменной цикла на величину, равную шагу цикла;
* если конечное значение не достигнуто, то все перечисленные выше операции повторяются вновь; если конечное значение достигнуто, управление передается оператору, следующему непосредственно за оператором '''NEXT'''.

Шаг цикла может принимать и отрицательное значение:

<pre>
ПРИМЕР 10
====================
10 FOR I = 10 TO 0 STEP -2 
20 PRINT I; 
30 NEXT I
</pre>

В этом случае последовательность выведенных на экран значений будет обратной: 10 8 6 4 2 0.

Заметьте: операторы, входящие в тело цикла, в любом случае выполняются хотя бы один раз, так как проверка условия окончания производится в конце цикла.

Организовать циклическую работу программы можно
и без специального оператора цикла (например, при помощи оператора '''GOTO'''
и условного оператора, описываемого ниже), однако его использование значительно
упрощает разработку программ, освобождая программиста от необходимости проведения
изменения переменной цикла и проверки его окончания.

Условный оператор '''IF X THEN Y'''— один из
фундаментальных операторов, имеющихся практически в любом алгоритмическом языке
программирования высокого уровня. Работа его заключается в следующем. Проверяется
выполнение условия X:

* если Х— истинно, то выполняются операторы, стоящие в строке после слова THEN;
* если Х— ложно, то управление будет передано следующей строке программы.

(Выражение Х считают ложным, если его результат
равен нулю, в противном случае Х истинно). Выражение Х может включать проверку
самых различных условий с использованием, как операций отношения, так и логических
операций. Операторы, стоящие после слова '''THEN'''. также могут быть различными.
В частности, если необходимо выполнить оператор GOTO, то название оператора
можно опустить и просто указать номер строки программы, которой следует передать
управление. Следующий пример иллюстрирует использование условного оператора:

<pre>
ПРИМЕР 11
===================
IF X=10 THEN 1000
IF A =0 THEN В = 1
IF A = 5. AND C = 7 THEN GOSUB 1000 
IF 2 = 0 OR F = 0 THEN L=15: GOTO 250 
IF B$="HET" THEN PRINT "ВЕРНО" 
IF K$="ДА" OR K$="Д" THEN STOP
</pre>
 
Особенностью описываемой версии интерпретатора
языка Бейсик является наличие операторов, позволяющих формировать графические
изображения на экране дисплея.

[[Изображение:M80Basic.png|right]]

Оператор '''CLS''' предназначен для стирания информации с экрана и прежде, чем начнется
формирование графических изображений. В графическом режиме на экране дисплея
возможно отображение 128 точек по горизонтали и 64 точек по вертикали. На рис.
1 показан формат экрана в графическом режиме. Точки адресуются в прямоугольной
системе координат с началом в левом нижнем углу экрана.

Оператор '''PLOT X, Y, L''' позволяет погасить
(или высветить) точку с координатами 0 &lt; Х &lt; 127 по горизонтали и 0 &lt;
У &lt; б3 по вертикали. Если операнд Z равен 1, то соответствующая точка засвечивается,
0— гаснет. Например, следующая программа „рисует“ на экране прямую линию с
начальными координатами Х = 50, У = 0 и конечными Х = 110, Y = 60 (обратите
внимание на то, что диапазон изменения координат Х и Y оператора '''CUR X, Y'''
вдвое меньше, чем соответствующий диапазон оператора '''PLOT X, Y'''

<pre>
ПРИМЕР 12
================= 
10 CLS 
20 FOR l = 0 TO 40 
30 PLOT 50 + I, I, I, 1 
40 NEXT I 
</pre>
 
Оператор '''LINE X, Y''' позволяет вычерчивать
отрезки прямых линий. Операнды Х и Y задают координату конечной точки отрезка.
Для задания координат начала отрезка, а также его вида (засветка или гашение)
служит оператор '''PLOT''':

<pre>
ПРИМЕР 13 
=========== 
10 CLS
20 PLOT 0,0,l 
30 LINE 40140
40 STOP 
</pre>
 
После выполнения программы на экране появится
отрезок прямой линии с координатами начала 0,0 и координатами конца 40, 40.

Если следующий отображаемый отрезок должен начинаться
там, где закончился предыдущий, то оператор '''PLOT''' необходим для задания
координат начала только первого отрезка. Так программа выводит на экран дисплея
изображение квадрата.

<pre>
ПРИМЕР 14
================
10 CLS
20 PLOT 20,20,1 
30 LINE 20,50: LINE 50,50 
40 LINE 50,20: LINE 20,20 
50 STOP
</pre>
 
Используя описанные операторы, на экране можно
создавать разнообразные изображения, в том числе и динамически изменяющиеся.
Однако разработка графических программ не простая задача. Для более глубокого
ее изучения мы рекомендуем читателю обратиться к литературе.

Среди операторов Бейсика особое место занимают
операторы, позволяющие получить доступ к машинным ресурсам— ячейкам памяти
и портам ввода-вывода.

Оператор '''POKE X, Y''' позволяет записать в
ячейку памяти, адрес которой задай выражением X, величину, равную результату
выражения Y (значение результата должно находится в диапазоне от 0 до 255 (00Н-
FFH)).

Оператор '''OUT X, Y''' позволяет выдать в порт
с номером, определяемым выражением X, результат выражения Y. Ограничения на
Y такие же, как и в предыдущем операторе.

И, наконец, еще один оператор, имеющийся в языке
Бейсик.

Оператор '''CLEAR Х''' предназначен для очистки
памяти от переменных. Если параметр Х не указан, то после выполнения оператора
всем числовым переменным присваивается значение 0, а всем символьным— значение
„пустая строка“. Если же параметр Х указывается, то в памяти выделяется область
размером Х байт, предназначенная для хранения символьных переменных. Например,
CLEAR 500 отводит 500 байт памяти под буфер для символьных переменных. По умолчанию
размер этого буфера равен 50 байтам.

== Функции в языке Бейсик ==

В языке Бейсик имеется ряд встроенных функций,
которые позволяют значительно упростить написание некоторых программ. Название
встроенная означает, что в интерпретаторе есть программа обработки данной функции.
Существуют функции, работающие с числовыми и символьными данными, функции преобразования
типов данных, а также функции обращения к таким машинным ресурсам, как содержимое
ячеек памяти и портов ввода-вывода. В этом порядке мы и будем их рассматривать.

В выражениях обращение к функции должно находиться
в правой части, например:

<pre>
A=SIN (X) + 5.
</pre>

Таким образом, для вызова функции достаточно указать
ее имя в выражении. В круглых скобках указывают аргумент. Результат работы функции
(в данном случае значение синуса X) используется в дальнейшем в выражении для
вычисления окончательного результата и присвоения полученного значения левой
части выражения. Во всех описываемых ниже функциях в качестве аргумента могут
выступать константы, имена переменных и выражения, содержащие, в свою очередь,
обращения к встроенным функциям.

Таблица 5.
{| class=border
|-
| ФУНКЦИЯ || Результат работы
|-
| SQR(X) || КОРЕНЬ КВАДРАТНЫЙ ИЗ Х
|-
| EXP(X) || ЭКСПОТЕНЦИАЛЬНАЯ ФУНКЦИЯ Е
|-
| LOG(X) || НАТУРАЛЬНЫЙ ЛОГАРИФМ ОТ Х
|-
| ABS(X) || АБСОЛЮТНАЯ ВЕЛИЧИНА Х
|-
| &nbsp; || Х, ЕСЛИ Х &gt; 0
|-
| &nbsp; || 0, ЕСЛИ X = 0
|-
| &nbsp; || -X, ЕСЛИ X &lt; 0
|-
| SGN(X)` || ЗНАК Х
|-
| &nbsp; || 1, ЕСЛИ Х &gt; 0
|-
| &nbsp; || 0, ЕСЛИ X = 0
|-
| &nbsp; || -l, ЕСЛИ X &lt; 0
|-
| SIN(X) || СИНУС ОТ Х (Х В РАДИАНАХ)
|-
| COS(X) || КОСИНУС ОТ Х (X В ПАДИАНАХ)
|-
| TAN(X) || ТАНГЕНС ОТ X (X В РАДИАНАХ)
|-
| ATN(X) || АРКТАНГЕНС ОТ X, РЕЗУЛЬТАТ В РАДИАНАХ
|-
| INT(X) || ЦЕЛАЯ ЧАСТЬ ОТ Х
|-
| RND(X&gt; || СЛУЧАЙНОС ЧИСЛО В ДИАПАЗОНЕ 0 — 1
|}

В табл. 5 перечислены встроенные функции языка Бейсик. Почти все
они хорошо знакомы читателю по курсу математики средней школы и только две последние
требуют дополнительных разъяснений.

Например,
* INT (7.6) равно 7,
* INT (-5.6) равно −6,
* INT (3) равно 3.

Функция генерации случайного числа '''RND(X)'''
занимает особое место среди других функций. С ее помощью можно писать на языке
Бейсик разнообразные программы моделирования и, как частный случай таких программ,
игровые. Отметим, что аргумент этой функции всегда равен 1. Результат работы
функции — случайное число в диапазоне от 0 до 1.

Если необходимо случайное число в другом диапазоне, например от 0 до 100, то достаточно в программе написать A=RND(1)*100, а чтобы сделать его целым— A=INT(RND(1)*100).

Тригонометрические функции в Бейсике требуют,
чтобы аргумент был указан в радианах. Если необходимо указать угол в градусах,
то перевод угла из одной меры в другую легко произвести в программе, воспользовавшись
известной формулой Х=С*π/180, где С — значение
угла в градусах, Х — значение его в радианах.

Как Вы, наверное, уже заметили, в языке реализованы
не все тригонометрические функции, однако это не должно вызывать осложнений,
так как всегда можно воспользоваться известными тригонометрическими выражениями
для определения одних функций через другие.

Язык Бейсик имеет развитые встроенные средства
для обработки текстов, что выгодно отличает его от других языков программирования
высокого уровня. Рассмотрим встроенные функции для работы с символьной информацией.

Функция '''LEN(Х$)'''. Результатом ее работы
является число, равное количеству символов (длине) переменной Х$. Например,
если Х$="ПАРОХОД", то LEN (Х$) равно 7.

Функция '''LEFT(X$,Y)''' позволяет вывести на
экран строку символов долиной Y, начиная с крайнего левого символа. Например,
'''LEFT$(Х$,3)''' равно „ПАР“.

Функция '''RIGHTS(Х$,Y)''' проделывает тоже самое,
но начиная с крайнего правого символа. Например, '''RIGHT$(Х$,3)''' равно „ХОД“.

Функция '''MID$(Х$,Y,Z)''' позволяет вывести
строку символов длиной L. начиная с позиции Y. Отсчет позиций ведется слева
направо. Например. '''MID$(Х$,3,4)''' равно „РОХО“. В программах на Бейсике
часто возникает необходимость перевода данных из числового вида в символьный
и наоборот. Этой цели служат две специальные встроенные функции.

Функция '''STR$(X)''' служит для преобразования
числовых величин в символьный вид. Аргумент Х — число или арифметическое выражение,
а результат работы функции — строка, являющаяся символьным представлением данного
числа. Например, пусть Х=10<SUP>6</SUP>, тогда '''STR$(X)''' равно „1Е+07“;
если Х=-3,15, то '''STR$(X)''' равно „-3.15“.

Функция '''VAL(X$)''' предназначена для обратного
преобразования данных из символьного вида в числовой, начиная с крайнего левого
символа переменной Х$. Если в строке встречается недопустимый символ (не цифра
и не знак числа), то преобразование прекращается. Если уже первый символ является
недопустимым, то результат работы равен 0. Например, если Х$="13 ШТУК", то VAL(Х$)
равно 13; если Х$="ШТУК 13", то VAL(Х$) равно 0.

Как известно, каждому символу соответствует определенный
семиразрядный код (см. табл. 2 в „Радио“, 1983, №8, с. 26). В Бейсике есть
две встроенные функции для работы с колами символов.

Функция '''ASC(Х$)''' переводит код первого символа
Х$ в десятичный вид. Например, если X$ = "D", то ASC(Х$) равно 68.

Функция '''CHR$(X)''' позволяет вывести на экран
символ, код которого равен Х (аргумент функции не должен превышать 255). Например,
CHR$(68) равно „D“. Эту функцию удобно использовать для выдачи на экран дисплея
различных управляющих символов. Например, PRINT CHR$(12) приведет к перемещению
курсора в левый верхний угол экрана.

Для управления форматом печати результатов на
экране дисплея служат следующие три функции.

Функция '''POS(1),''' результатом работы которой
является целое число, равное номеру позиции последнего отпечатанного символа
в текущей строке. Например: PRINT „ABCDK“. В этом случае POS(1) равно 5.

Функция '''SPC(X)''' позволяет вставлять в печатаемую
строку Х пробелов (аргумент Х не должен превышать 255). Например, в результате
обработки строки PRINT „Транзистор“; SPC(5): „КТ315Г“, будет напечатано:

<pre>
ТРАНЗИСТОР _________КТ315Г (пробел).
</pre>

Функция '''TAB(X)''' — это функция горизонтальной
табуляции, которая позволяет переместить курсор в заданную позицию в строке.
Аргумент Х и в этом случае не должен превышать 255. Он указывает, сколько позиций
необходимо отступить от левого края строки. Например, после выполнения операторов
PRINT TAB(5): „A“; TAB(10): „В“ символ „А“ будет напечатан в 6-м знакоместе,
а „В“ — в 11-м.

При разработке больших программ, а также программ
обработки текстов необходимо иметь представление об объеме свободной памяти,
не занятой текстом программы и переменными. Для этих целей в языке Бейсик предусмотрена
функция '''FRE(X).''' Если аргумент этой функции число, то результатом будут
число свободных байтов в памяти. Если аргумент — символьное выражение, то результат
— число свободных байтов в буфере для символьных переменных. Например, после
выполнения оператора PRINT FRE(0) на экран будет выведено число свободных байтов
в памяти.

Выше уже отмечалось, что интерпретатор позволяет
разрабатывать программы управления различными объектами. Управляющие программы
обычно содержат критичные по времени выполнения фрагменты и требуют также возможности
непосредственного манипулирования с содержимым ячеек памяти и портов ввода-вывода.
Следующее встроенные функции Бейсика и служат для этих целей.

Результат работы функции '''РЕЕК(Х)''' — десятичное
число, равное содержимому ячейки памяти, адрес которой определен аргументом
X. Например, в результате выполнения оператора PRINT PEEK(0) будет напечатано
49.

Обратившись к функции '''INP(X),''' получим десятичное
число, равное содержимому порта ввода с номером Х(Х&lt;255), например, A = INP(1).
Переменной А в этом случае будет присвоено значение, равное содержимому порта
номер 1.

Функция '''USR(X)''' предназначена для организации
связи программ, написанных на Бейсике, с подпрограммами, написанными на ассемблере
или в машинных кодах. Аргумент Х — это адрес ячейки памяти, начиная с которой
записана программа в машинных кодах. Поэтому, если в выражении встретится обращение
к функции USR(X), то управление будет передано подпрограмме, расположенной по
адресу X.

В конце подпрограммы обязательно должна стоять
команда '''RET''', после выполнения, которой управление возвращается программе
на Бейсике. Результат работы подпрограммы (в виде одного байта) перед возвратом
из нее помещается в аккумулятор. Функция '''USR(X)''' позволяет критичные по
времени н специфике работы фрагменты алгоритма реализовывать на ассемблере,
а основную программу писать на языке Бейсик. Для передачи параметров для подпрограмм
и результатов в программу на Бейсике можно воспользоваться оператором '''POKEX,Y'''
и функцией '''РЕЕК(Х).'''

Подпрограммы целесообразно размещать в „защищенной“
области памяти (то есть в той, которую заведомо не использует интерпретатор).
Если в функциях в операторах, работающих с адресами памяти, адрес превышает
значение 32767 (7FFFH), то он должен указываться в виде отрицательного числа.
Адресу FFFFH будет соответствовать −1, адресу FFFEH— −2 и т.д.

Рассмотрим пример.

Пусть микроЭВМ „Микро-80“ используется для обучения
детей таблице умножения. Очередной вопрос появляется на экране в виде текстового
сообщения. Обучаемый отвечает на вопрос, нажимая соответствующие клавиши на
клавиатуре дисплея. Если ответ верен, то в качестве поощрения микро-ЭВМ „исполняет“
несколько первых тактов популярной детской песенки. „Исполняет“ мелодию подпрограмма,
написанная на языке ассемблера, генерирующая соответствующую последовательность
импульсов. Сделать это в программе на Бейсике не представляется возможным из-за
временных ограничений, присущих интерпретатору. Вызов подпрограммы происходит
с помощью функции '''USR(X)''' в соответствующем месте основной программы,
написанной на Бейсике. Таким образом, разумно сочетая возможности программирования
на ассемблере и на языке высокого уровня, можно получить требуемый результат.

Кроме перечисленных встроенных функций, в Бейсике
имеется возможность вводить в текст программы определение новых функций и в
дальнейшем обращаться к ним по имени в различных выражениях. Определить функцию
можно в любом месте программы с помощью оператора '''DEF.''' Имена всех функций
должны начинаться обязательно с символов '''FN''', за которыми могут следовать
один или два любых символа. Ограничения на них такие же, как н на имена переменных;
например, FNA, FNXI — допустимые имена, ES2, ЕКА — недопустимые.

Определим, например, функцию FNCT(X) следующим
образом:

<pre>
10 DEFFNCT(X) = COS(X)/SIN(X). 
</pre>

В соответствии с этим определением функция FNCT
— это тригонометрическая функция котангенс, не реализованная в виде встроенной
в интерпретаторе.

Оператор '''DEF''' можно использовать только
в программном режиме. Кроме того, допускается определение функций только от
одного числового аргумента. Параметр X, стоящий в операторе определения, является
формальным, необходимым для обозначения функциональной зависимости. При обращении
к функции вместо него указывается фактический аргумент, который заменяет формальный
параметр, стоящий в правой части оператора присваивания. Например, после выполнения
строки программы

<pre>
20 PRINT FNCT(2) 
</pre>

на экране будет напечатано значение котангенса для угла, равного 2 радианам.

Использование возможности определения функций
самим программистом позволяет сократить текст программ и значительно улучшить
их читаемость.
